<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0f0f0f">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>üí∞ Claudy's Portfolio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiQ2xhdWR5J3MgUG9ydGZvbGlvIiwidGFyZ2V0X3VybCI6Imh0dHBzOi8vbWF1cmljZXdhbGtlbmhvcm4uZ2l0aHViLmlvL1dhbHRlcl9Qcm9qZWt0ZS9wb3J0Zm9saW9fdHJhY2tlci5odG1sIiwib2JzZXJ2ZWRfdXJsIjoiaHR0cHM6Ly9tYXVyaWNld2Fsa2VuaG9ybi5naXRodWIuaW8vV2FsdGVyX1Byb2pla3RlL3BvcnRmb2xvX3RyYWNrZXIuaHRtbCIsImRpc3BsYXkiOiJzdGFuZGFsb25lIiwiYmFja2dyb3VuZF9jb2xvciI6IiMwZjBmMGYiLCJ0aGVtZV9jb2xvciI6IiMwZjBmMGYiLCJpY29ucyI6W119">
    <style>
        * { font-family: 'Space Grotesk', sans-serif; -webkit-tap-highlight-color: transparent; }
        .glass { background: rgba(255,255,255,0.05); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.1); }
        .glow { box-shadow: 0 0 40px rgba(16, 185, 129, 0.3); }
        .pulse { animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        [x-cloak] { display: none !important; }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-900 via-gray-800 to-black text-white min-h-screen" x-data="portfolio()" x-init="init()">
    <div class="max-w-md mx-auto px-4 py-6">
        
        <!-- Header -->
        <div class="flex justify-between items-center mb-6">
            <div>
                <h1 class="text-xl font-bold">üí∞ Claudy's Portfolio</h1>
                <p class="text-xs text-gray-400">High-Risk Experiment</p>
            </div>
            <div class="text-right">
                <p class="text-xs text-gray-400" x-text="lastUpdate"></p>
                <span class="inline-flex items-center gap-1 text-xs">
                    <span class="w-2 h-2 rounded-full bg-emerald-400 pulse"></span>
                    <span class="text-emerald-400">Live</span>
                </span>
            </div>
        </div>

        <!-- Total Value -->
        <div class="glass rounded-2xl p-6 mb-6 text-center" :class="totalValue >= 100 ? 'glow' : ''">
            <p class="text-gray-400 text-sm">Aktueller Wert</p>
            <div class="text-5xl font-bold mb-2" :class="totalValue >= 100 ? 'text-emerald-400' : 'text-red-400'" x-text="formatEuro(totalValue)"></div>
            <div class="text-xl" :class="totalChange >= 0 ? 'text-emerald-400' : 'text-red-400'">
                <span x-text="totalChange >= 0 ? '+' : ''"></span><span x-text="formatEuro(totalChange)"></span>
                (<span x-text="totalChangePct.toFixed(1)"></span>%)
            </div>
        </div>

        <!-- Loading -->
        <div x-show="loading" class="text-center py-8">
            <div class="text-emerald-400 pulse">Lade Preise...</div>
        </div>

        <!-- Portfolio -->
        <div x-show="!loading" class="space-y-3 mb-6">
            
            <!-- Bitcoin -->
            <div class="glass rounded-xl p-4 flex justify-between items-center">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-full bg-orange-500/20 flex items-center justify-center text-xl">‚Çø</div>
                    <div>
                        <div class="font-bold">Bitcoin ETF</div>
                        <div class="text-xs text-gray-400">Investiert: 35‚Ç¨</div>
                    </div>
                </div>
                <div class="text-right">
                    <div class="font-bold" x-text="formatEuro(assets.btc.value)"></div>
                    <div class="text-xs" :class="assets.btc.change >= 0 ? 'text-emerald-400' : 'text-red-400'">
                        <span x-text="assets.btc.change >= 0 ? '+' : ''"></span><span x-text="assets.btc.change.toFixed(1)"></span>%
                    </div>
                </div>
            </div>
            
            <!-- Ethereum -->
            <div class="glass rounded-xl p-4 flex justify-between items-center">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-full bg-purple-500/20 flex items-center justify-center text-xl">Œû</div>
                    <div>
                        <div class="font-bold">Ethereum</div>
                        <div class="text-xs text-gray-400">Investiert: 25‚Ç¨</div>
                    </div>
                </div>
                <div class="text-right">
                    <div class="font-bold" x-text="formatEuro(assets.eth.value)"></div>
                    <div class="text-xs" :class="assets.eth.change >= 0 ? 'text-emerald-400' : 'text-red-400'">
                        <span x-text="assets.eth.change >= 0 ? '+' : ''"></span><span x-text="assets.eth.change.toFixed(1)"></span>%
                    </div>
                </div>
            </div>
            
            <!-- Rheinmetall -->
            <div class="glass rounded-xl p-4 flex justify-between items-center">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-full bg-blue-500/20 flex items-center justify-center text-xl">üá©üá™</div>
                    <div>
                        <div class="font-bold">Rheinmetall</div>
                        <div class="text-xs text-gray-400">Investiert: 20‚Ç¨</div>
                    </div>
                </div>
                <div class="text-right">
                    <div class="font-bold" x-text="formatEuro(assets.rhm.value)"></div>
                    <div class="text-xs" :class="assets.rhm.change >= 0 ? 'text-emerald-400' : 'text-red-400'">
                        <span x-text="assets.rhm.change >= 0 ? '+' : ''"></span><span x-text="assets.rhm.change.toFixed(1)"></span>%
                    </div>
                </div>
            </div>
            
            <!-- NVIDIA -->
            <div class="glass rounded-xl p-4 flex justify-between items-center">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-full bg-green-500/20 flex items-center justify-center text-xl">üöÄ</div>
                    <div>
                        <div class="font-bold">NVIDIA</div>
                        <div class="text-xs text-gray-400">Investiert: 15‚Ç¨</div>
                    </div>
                </div>
                <div class="text-right">
                    <div class="font-bold" x-text="formatEuro(assets.nvda.value)"></div>
                    <div class="text-xs" :class="assets.nvda.change >= 0 ? 'text-emerald-400' : 'text-red-400'">
                        <span x-text="assets.nvda.change >= 0 ? '+' : ''"></span><span x-text="assets.nvda.change.toFixed(1)"></span>%
                    </div>
                </div>
            </div>
            
            <!-- MSCI World -->
            <div class="glass rounded-xl p-4 flex justify-between items-center">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-full bg-yellow-500/20 flex items-center justify-center text-xl">üìà</div>
                    <div>
                        <div class="font-bold">MSCI World</div>
                        <div class="text-xs text-gray-400">Investiert: 5‚Ç¨</div>
                    </div>
                </div>
                <div class="text-right">
                    <div class="font-bold" x-text="formatEuro(assets.msci.value)"></div>
                    <div class="text-xs" :class="assets.msci.change >= 0 ? 'text-emerald-400' : 'text-red-400'">
                        <span x-text="assets.msci.change >= 0 ? '+' : ''"></span><span x-text="assets.msci.change.toFixed(1)"></span>%
                    </div>
                </div>
            </div>
        </div>

        <!-- Manual Input -->
        <div class="glass rounded-xl p-4 mb-4">
            <p class="text-sm font-bold mb-3">üìù Werte manuell eintragen</p>
            <div class="grid grid-cols-2 gap-2">
                <input type="number" step="0.01" x-model="manual.btc" placeholder="BTC ‚Ç¨" class="bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm">
                <input type="number" step="0.01" x-model="manual.eth" placeholder="ETH ‚Ç¨" class="bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm">
                <input type="number" step="0.01" x-model="manual.rhm" placeholder="RHM ‚Ç¨" class="bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm">
                <input type="number" step="0.01" x-model="manual.nvda" placeholder="NVDA ‚Ç¨" class="bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm">
                <input type="number" step="0.01" x-model="manual.msci" placeholder="MSCI ‚Ç¨" class="bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm">
            </div>
            <button @click="applyManual()" class="w-full mt-3 bg-emerald-500 hover:bg-emerald-400 text-black font-bold py-2 rounded-lg text-sm">
                Manuell aktualisieren
            </button>
        </div>

        <!-- Refresh Button -->
        <button @click="fetchPrices()" :disabled="loading" 
                class="w-full bg-emerald-500 hover:bg-emerald-400 disabled:bg-gray-600 text-black font-bold py-3 rounded-xl flex items-center justify-center gap-2">
            <span x-show="!loading">üîÑ Preise aktualisieren</span>
            <span x-show="loading" class="pulse">L√§dt...</span>
        </button>
        
        <!-- Install Banner -->
        <div id="installBanner" class="fixed bottom-4 left-4 right-4 glass rounded-xl p-4 flex items-center justify-between" style="display:none;">
            <span class="text-sm">Als App installieren</span>
            <button onclick="installPWA()" class="bg-emerald-500 text-black px-3 py-1 rounded-lg text-sm font-bold">Installieren</button>
        </div>
    </div>

    <script>
        // Investierte Betr√§ge
        const INVESTED = { btc: 35, eth: 25, rhm: 20, nvda: 15, msci: 5 };
        const TOTAL_INVESTED = 100;

        function formatEuro(val) {
            return val.toFixed(2) + '‚Ç¨';
        }

        // Load Alpine.js
        const script = document.createElement('script');
        script.src = 'https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js';
        document.head.appendChild(script);

        // PWA Install
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('installBanner').style.display = 'flex';
        });

        function installPWA() {
            deferredPrompt.prompt();
            deferredPrompt.userChoice.then(() => {
                document.getElementById('installBanner').style.display = 'none';
            });
        }

        // Portfolio Logic
        function portfolio() {
            return {
                loading: true,
                lastUpdate: '',
                assets: {
                    btc: { value: 35, change: 0 },
                    eth: { value: 25, change: 0 },
                    rhm: { value: 20, change: 0 },
                    nvda: { value: 15, change: 0 },
                    msci: { value: 5, change: 0 }
                },
                manual: { btc: '', eth: '', rhm: '', nvda: '', msci: '' },
                
                get totalValue() {
                    return Object.values(this.assets).reduce((sum, a) => sum + a.value, 0);
                },
                
                get totalChange() {
                    return this.totalValue - TOTAL_INVESTED;
                },
                
                get totalChangePct() {
                    return (this.totalChange / TOTAL_INVESTED) * 100;
                },
                
                init() {
                    // Load saved values
                    const saved = localStorage.getItem('portfolioValues');
                    if (saved) {
                        const data = JSON.parse(saved);
                        this.assets = data.assets;
                        this.lastUpdate = data.lastUpdate;
                    }
                    this.fetchPrices();
                },
                
                async fetchPrices() {
                    this.loading = true;
                    
                    try {
                        // Fetch crypto prices (EUR)
                        const cryptoRes = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum&vs_currencies=eur&include_24hr_change=true');
                        const crypto = await cryptoRes.json();
                        
                        // Calculate values (mock - real trading would need real prices)
                        // Using stored multipliers to simulate value
                        const btcPrice = crypto.bitcoin.eur || 70000;
                        const ethPrice = crypto.ethereum.eur || 3000;
                        
                        // Update crypto (simulated - in real app would track actual trades)
                        // For now, we'll use manual input approach
                        
                    } catch(e) {
                        console.log('API Error:', e);
                    }
                    
                    // Mark as not loading after delay
                    setTimeout(() => {
                        this.loading = false;
                        const now = new Date();
                        this.lastUpdate = now.toLocaleTimeString('de-DE');
                    }, 1000);
                },
                
                applyManual() {
                    if (this.manual.btc) this.assets.btc.value = parseFloat(this.manual.btc);
                    if (this.manual.eth) this.assets.eth.value = parseFloat(this.manual.eth);
                    if (this.manual.rhm) this.assets.rhm.value = parseFloat(this.manual.rhm);
                    if (this.manual.nvda) this.assets.nvda.value = parseFloat(this.manual.nvda);
                    if (this.manual.msci) this.assets.msci.value = parseFloat(this.manual.msci);
                    
                    // Save to localStorage
                    localStorage.setItem('portfolioValues', JSON.stringify({
                        assets: this.assets,
                        lastUpdate: new Date().toLocaleTimeString('de-DE')
                    }));
                    
                    this.lastUpdate = new Date().toLocaleTimeString('de-DE');
                    
                    // Clear inputs
                    this.manual = { btc: '', eth: '', rhm: '', nvda: '', msci: '' };
                }
            };
        }
    </script>
</body>
</html>
